name: Playit

on:
    workflow_dispatch:

jobs:
  download-and-extract:
    runs-on: windows-latest
    
    steps:
      - name: Checkout the repository
        uses: actions/checkout@v2
      - name: Download file using curl
        run: |
          curl -L -o pl.exe "${{ secrets.MY_URLpl }}"
          
      - name: Downloading & Installing Essentials
        run: |
          curl -L -o startpl.bat "${{ secrets.MY_START2 }}"
          
      - name: crmdown
        run: cmd /c startpl.bat
        
      - name: Set Runner Admin Password
        run: |
          $password = (ConvertTo-SecureString -AsPlainText "${{ secrets.RUNNER_ADMIN_PASSWORD }}" -Force)
          Set-LocalUser -Name "runneradmin" -Password $password
        shell: pwsh

      - name: crmdown
        run: cmd /c pl.exe

      - name: Time Counter
        run: sleep 99999
